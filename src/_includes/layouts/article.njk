---
layout: layouts/base.njk
---
{# Breadcrumbs: Home > Block Title > Current Article #}
{% set blockSlug = block if block else null %}
{% set blockTitle = null %}
{% if blockSlug %}
  {% for b in learningPath.blocks %}
    {% if b.slug == blockSlug %}
      {% set blockTitle = b.title %}
    {% endif %}
  {% endfor %}
{% endif %}
<nav class="breadcrumbs" aria-label="Breadcrumb">
  <ol>
    <li><a href="/">Home</a></li>
    {% if blockTitle %}
      <li>{{ blockTitle }}</li>
    {% endif %}
    <li aria-current="page">{{ title }}</li>
  </ol>
</nav>

<article class="article">
  <header class="article-header">
    <h1 class="article-title">{{ title }}</h1>
    {% if description %}
    <p class="article-description">{{ description }}</p>
    {% endif %}
    <div class="article-meta">
      {{ content | readingTime }}
    </div>
    {% if prerequisites and prerequisites.length %}
    <div class="article-prerequisites">
      <span class="prerequisites-label">Read first:</span>
      {% for prereq in prerequisites %}{% if loop.index > 1 %}, {% endif %}<a href="{{ prereq.url }}">{{ prereq.title }}</a>{% endfor %}
    </div>
    {% endif %}
  </header>

  <div class="article-content-wrapper">
    <div class="article-body" data-pagefind-body>
      {{ content | safe }}
    </div>

    <aside class="article-toc" aria-label="Table of contents">
      <h2 class="toc-heading">Contents</h2>
      <div class="article-toc-nav">
        <span class="toc-active-indicator" aria-hidden="true"></span>
        {{ content | toc | safe }}
      </div>
    </aside>
  </div>
</article>

{# Contribution footer #}
{% set sourceUrl = "https://github.com/FlyingPumba/learn-mech-interp/blob/main/" + page.inputPath | replace("./", "") %}
<div class="article-contribute">
  <p>Found an error or want to contribute? <a href="{{ sourceUrl }}" target="_blank" rel="noopener">Edit this page on GitHub</a>.</p>
</div>

{# Previous/Next navigation #}
{% set prevArticle = collections.learningPath | getPreviousCollectionItem(page) %}
{% set nextArticle = collections.learningPath | getNextCollectionItem(page) %}
{% if prevArticle or nextArticle %}
<nav class="article-nav" aria-label="Article navigation">
  {% if prevArticle %}
    <a href="{{ prevArticle.url }}" class="article-nav-link article-nav-prev">
      <span class="article-nav-label">Previous</span>
      <span class="article-nav-title">{{ prevArticle.data.title }}</span>
    </a>
  {% endif %}
  {% if nextArticle %}
    <a href="{{ nextArticle.url }}" class="article-nav-link article-nav-next">
      <span class="article-nav-label">Next</span>
      <span class="article-nav-title">{{ nextArticle.data.title }}</span>
    </a>
  {% endif %}
</nav>
{% endif %}
