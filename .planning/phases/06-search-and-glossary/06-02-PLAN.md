---
phase: 06-search-and-glossary
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/_data/glossary.json
  - src/glossary/index.njk
  - src/css/components.css
autonomous: true

must_haves:
  truths:
    - "The glossary page at /glossary/ lists MI terms alphabetically with letter group headings"
    - "Each glossary term has a brief definition and at least one link to a relevant article"
    - "Clicking an alphabetical navigation letter scrolls to the corresponding letter section"
    - "The glossary covers key terms from all 8 learning path blocks"
    - "Glossary links point to existing article URLs that resolve correctly"
  artifacts:
    - path: "src/_data/glossary.json"
      provides: "Curated MI glossary data with terms, definitions, and article links"
      contains: "term"
    - path: "src/glossary/index.njk"
      provides: "Glossary page template rendering terms alphabetically"
      contains: "glossary"
    - path: "src/css/components.css"
      provides: "Glossary page styling"
      contains: "glossary"
  key_links:
    - from: "src/glossary/index.njk"
      to: "src/_data/glossary.json"
      via: "Eleventy global data cascade makes glossary array available as 'glossary' variable"
      pattern: "for entry in glossary"
    - from: "src/_data/glossary.json"
      to: "src/topics/*/index.md"
      via: "Article links in glossary entries use /topics/<slug>/ URLs matching existing articles"
      pattern: "/topics/"
---

<objective>
Create a curated glossary of mechanistic interpretability terms as a global data file and render it as an alphabetically organized glossary page, satisfying requirements SRCH-04 and SRCH-05.

Purpose: Gives users a quick-reference index of MI terminology with links to the articles where each concept is explained in depth, making the site useful as a reference tool in addition to a learning resource.
Output: glossary.json data file with ~70 curated MI terms, glossary page template at /glossary/, and glossary-specific CSS.
</objective>

<execution_context>
@/Users/ivan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ivan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-search-and-glossary/06-RESEARCH.md
@src/_data/learningPath.json
@src/_includes/layouts/base.njk
@src/css/components.css
@src/css/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create glossary.json with curated MI terms</name>
  <files>
    src/_data/glossary.json
  </files>
  <action>
    Create `src/_data/glossary.json` as a JSON array of glossary entries. Each entry has three fields:
    - `term`: The term name (string, used for alphabetical sorting)
    - `definition`: A brief, 1-2 sentence definition (string)
    - `links`: Array of objects with `article` (URL path) and `label` (display text)

    The array MUST be pre-sorted alphabetically by `term` (the template iterates in order, it does not sort).

    Use ONLY article-level links (e.g., `/topics/sparse-autoencoders/`), NOT section anchors. This avoids the staleness pitfall where heading IDs change when article headings are edited.

    Include approximately 70 terms covering all 8 blocks. Here is the required term list organized by block (the JSON file itself must be sorted alphabetically across all blocks):

    **Block 1 - Transformer Foundations (~8 terms):**
    - Attention Head, Attention Pattern, Composition (of attention heads), Key Vector, Multi-Head Attention, OV Circuit, QK Circuit, Query Vector, Residual Stream, Value Vector, Virtual Attention Head

    **Block 2 - Foundations of MI (~10 terms):**
    - Direct Logit Attribution (DLA), Induction Head, Linear Probe, Linear Representation Hypothesis, Logit Lens, Mechanistic Interpretability, Previous Token Head, Probing Classifier, Residual Stream, Tuned Lens

    **Block 3 - Observation to Causation (~8 terms):**
    - Activation Patching, Attribution Patching, Causal Intervention, Circuit (neural), Completeness (circuit), Faithfulness (circuit), IOI Circuit, Path Patching

    **Block 4 - Superposition & Feature Extraction (~10 terms):**
    - Automated Interpretability, Dead Features, Feature (in MI), Feature Dashboard, Feature Splitting, Feature Steering, Gated SAE, Monosemanticity, Polysemanticity, Sparse Autoencoder (SAE), Superposition

    **Block 5 - Representation Engineering (~7 terms):**
    - Activation Engineering, CAA (Contrastive Activation Addition), Concept Erasure, Function Vector, LEACE, Refusal Direction, Representation Engineering

    **Block 6 - Circuit Tracing & Comparative (~6 terms):**
    - Attribution Graph, Circuit Tracing, Crosscoder, Model Diffing, Transcoder, Universality

    **Block 7 - MI for Safety (~5 terms):**
    - Alignment Faking, Deception Detection, Representation Reading, Safety Monitor, Sleeper Agent

    **Block 8 - Open Problems (~3 terms):**
    - Ground Truth Problem, Interpretability Illusion, Scalability (of MI methods)

    That totals approximately 67-70 terms after de-duplication (Residual Stream appears in blocks 1 and 2 -- include it once).

    Each definition should be:
    - 1-2 sentences, factual, concise
    - Written for someone who has some ML background but is new to MI
    - NOT a copy of any article content (original phrasing)

    Each term should link to 1-2 articles where it is primarily discussed. Use the article slugs from learningPath.json to construct URLs in the format `/topics/<slug>/`.
  </action>
  <verify>
    - `cat src/_data/glossary.json | python3 -m json.tool` parses without errors
    - `python3 -c "import json; d=json.load(open('src/_data/glossary.json')); print(len(d), 'terms')"` shows approximately 65-75 terms
    - `python3 -c "import json; d=json.load(open('src/_data/glossary.json')); terms=[e['term'] for e in d]; assert terms == sorted(terms), 'Not sorted'; print('Sorted OK')"` confirms alphabetical ordering
    - All article URLs in links match existing topic directories under src/topics/
  </verify>
  <done>glossary.json contains ~70 alphabetically sorted MI terms with definitions and article links covering all 8 blocks.</done>
</task>

<task type="auto">
  <name>Task 2: Create glossary page template and CSS</name>
  <files>
    src/glossary/index.njk
    src/css/components.css
  </files>
  <action>
    1. Create `src/glossary/index.njk` with the following template:

    ```html
    ---
    title: Glossary
    layout: layouts/base.njk
    ---
    <div class="glossary-page">
      <h1>MI Glossary</h1>
      <p class="glossary-description">Key terms in mechanistic interpretability with links to articles where they are discussed.</p>

      <nav class="glossary-nav" aria-label="Glossary alphabetical navigation">
        {%- set letters = [] -%}
        {%- for entry in glossary -%}
          {%- set letter = entry.term[0] | upper -%}
          {%- if letter not in letters -%}
            {%- set _ = letters.push(letter) -%}
          {%- endif -%}
        {%- endfor -%}
        {%- for letter in letters -%}
          <a href="#letter-{{ letter }}">{{ letter }}</a>
        {%- endfor -%}
      </nav>

      {%- set currentLetter = "" -%}
      <dl class="glossary-list">
      {%- for entry in glossary -%}
        {%- set letter = entry.term[0] | upper -%}
        {%- if letter != currentLetter -%}
          {%- set currentLetter = letter -%}
          </dl>
          <h2 id="letter-{{ letter }}" class="glossary-letter">{{ letter }}</h2>
          <dl class="glossary-list">
        {%- endif -%}
        <div class="glossary-entry">
          <dt>{{ entry.term }}</dt>
          <dd>
            {{ entry.definition }}
            {%- if entry.links.length -%}
              <span class="glossary-links">See:
              {%- for link in entry.links -%}
                {% if loop.index > 1 %}, {% endif %}<a href="{{ link.article }}">{{ link.label }}</a>
              {%- endfor -%}
              </span>
            {%- endif -%}
          </dd>
        </div>
      {%- endfor -%}
      </dl>
    </div>
    ```

    Note: The `entry.term[0] | upper` extracts the first character and uppercases it for letter grouping. The data is pre-sorted alphabetically in glossary.json so the template just iterates in order.

    2. Append glossary CSS to `src/css/components.css` (after the Pagefind theming CSS added in Plan 01):

    ```css
    /* Glossary page */
    .glossary-page {
      max-width: var(--content-width-wide);
      margin: 0 auto;
      padding: var(--spacing-xl) var(--container-padding);
    }

    .glossary-page h1 {
      margin-bottom: var(--spacing-sm);
    }

    .glossary-description {
      color: var(--color-text-secondary);
      margin-bottom: var(--spacing-xl);
    }

    .glossary-nav {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-xs);
      margin-bottom: var(--spacing-2xl);
      padding: var(--spacing-sm) 0;
      border-bottom: 1px solid var(--color-border);
    }

    .glossary-nav a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      text-decoration: none;
      color: var(--color-link);
    }

    .glossary-nav a:hover {
      background: var(--color-background-subtle);
      color: var(--color-link-hover);
    }

    .glossary-letter {
      font-size: var(--font-size-h2);
      color: var(--color-link);
      margin-top: var(--spacing-2xl);
      margin-bottom: var(--spacing-md);
      padding-bottom: var(--spacing-xs);
      border-bottom: 2px solid var(--color-link);
    }

    .glossary-list {
      margin: 0;
      padding: 0;
    }

    .glossary-entry {
      margin-bottom: var(--spacing-lg);
    }

    .glossary-entry dt {
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: var(--spacing-xs);
    }

    .glossary-entry dd {
      margin-left: 0;
      color: var(--color-text);
      line-height: var(--line-height-body);
    }

    .glossary-links {
      display: block;
      margin-top: var(--spacing-xs);
      font-size: var(--font-size-small);
      color: var(--color-text-secondary);
    }

    .glossary-links a {
      color: var(--color-link);
    }

    .glossary-links a:hover {
      color: var(--color-link-hover);
    }
    ```
  </action>
  <verify>
    - `cat src/glossary/index.njk` shows the glossary template
    - `grep "glossary" src/css/components.css` shows glossary-specific CSS
    - Run `npm run build` and verify:
      - `_site/glossary/index.html` exists
      - The built HTML contains letter headings (h2 elements with ids like "letter-A", "letter-B", etc.)
      - The built HTML contains glossary term entries with definitions and article links
      - All article links in the glossary resolve to existing built pages in _site/topics/
    - No build errors
  </verify>
  <done>Glossary page renders at /glossary/ with alphabetical navigation, letter-grouped terms, definitions, and article links. All links resolve to existing articles.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `_site/glossary/index.html` exists and contains glossary terms with definitions
3. Glossary terms are grouped by letter with navigable anchor links
4. All article links in glossary point to existing built pages
5. Glossary covers terms from all 8 learning path blocks
6. glossary.json is valid JSON with alphabetically sorted entries
7. No regressions in search functionality or existing article rendering
</verification>

<success_criteria>
- Glossary page at /glossary/ lists ~70 MI terms alphabetically
- Each term has a definition and at least one link to a relevant article
- Alphabetical letter navigation works (clicking a letter scrolls to that section)
- Terms cover all 8 learning path blocks
- Build succeeds with both search and glossary features working
</success_criteria>

<output>
After completion, create `.planning/phases/06-search-and-glossary/06-02-SUMMARY.md`
</output>
