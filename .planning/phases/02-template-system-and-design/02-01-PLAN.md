---
phase: 02-template-system-and-design
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - eleventy.config.js
  - src/css/variables.css
  - src/css/base.css
  - src/css/layout.css
  - src/css/components.css
autonomous: true

must_haves:
  truths:
    - "CSS custom properties define all colors, spacing, and typography from a single file"
    - "CSS files are copied to _site/css/ during build"
    - "Typography targets 18px body text with 60-75 character line width"
  artifacts:
    - path: "src/css/variables.css"
      provides: "Design tokens (colors, spacing, typography)"
      contains: "--font-size-base"
    - path: "src/css/base.css"
      provides: "Reset, typography, semantic element styles"
      contains: "box-sizing"
    - path: "src/css/layout.css"
      provides: "Responsive container and layout styles"
      contains: "@media"
    - path: "src/css/components.css"
      provides: "Reusable component styles"
      contains: ".site-header"
    - path: "eleventy.config.js"
      provides: "Passthrough copy for CSS"
      contains: "addPassthroughCopy"
  key_links:
    - from: "src/css/base.css"
      to: "src/css/variables.css"
      via: "CSS custom property references"
      pattern: "var\\(--"
    - from: "eleventy.config.js"
      to: "src/css/"
      via: "passthrough copy directive"
      pattern: "addPassthroughCopy.*css"
---

<objective>
Create the CSS design system with custom properties for theming and Distill.pub-inspired academic typography.

Purpose: Establish the visual foundation that all templates will use, with design tokens that make future theming (dark mode, accessibility) straightforward.
Output: Four CSS files (variables.css, base.css, layout.css, components.css) copied to _site/css/ during build.
</objective>

<execution_context>
@/Users/ivan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ivan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-template-system-and-design/02-RESEARCH.md

# Current files
@eleventy.config.js
@src/_includes/layouts/base.njk
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CSS design tokens and base styles</name>
  <files>
    src/css/variables.css
    src/css/base.css
  </files>
  <action>
Create src/css/ directory and two CSS files:

**variables.css** - All design tokens on :root:
- Typography: --font-body (system sans), --font-heading (Charter/Cambria/Georgia serif stack), --font-mono (ui-monospace stack)
- Font sizes: --font-size-base: 18px, --font-size-small: 0.875rem, --font-size-h1: 2.5rem, --font-size-h2: 1.5rem, --font-size-h3: 1.25rem
- Line heights: --line-height-body: 1.6, --line-height-heading: 1.3
- Colors: --color-text: rgba(0,0,0,0.87), --color-text-secondary: rgba(0,0,0,0.6), --color-background: #ffffff, --color-link: #0066cc, --color-link-hover: #004499, --color-border: rgba(0,0,0,0.1)
- Spacing: --spacing-xs through --spacing-section (4px to 64px scale)
- Layout: --content-width: 65ch, --content-width-wide: 80ch, --container-padding: 1.5rem

**base.css** - Reset and typography:
- Box-sizing border-box reset
- html font-size set to var(--font-size-base)
- body with font-family, line-height, color, background from variables
- Heading styles (h1-h6) with serif font, appropriate sizes, margins
- Link styles with underline and hover states
- Paragraph margins
- List styles with proper padding
- Code/pre styles with monospace font and subtle background

Use the exact patterns from 02-RESEARCH.md Code Examples section.
  </action>
  <verify>
Files exist: ls src/css/variables.css src/css/base.css
Variables defined: grep -c "^--" src/css/variables.css shows 20+ custom properties
Base styles exist: grep "box-sizing" src/css/base.css returns matches
  </verify>
  <done>
variables.css contains all design tokens with semantic naming.
base.css contains reset and typography styles referencing variables.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create layout and component styles with responsive breakpoints</name>
  <files>
    src/css/layout.css
    src/css/components.css
    eleventy.config.js
  </files>
  <action>
**layout.css** - Responsive layout styles:
- .container class with max-width, auto margins, padding from variables
- main element with min-height for footer positioning
- .article-body with max-width: var(--content-width) for optimal reading width
- .wide class for content that needs more width (figures, code)
- Mobile-first responsive breakpoints:
  - Base (320px+): padding from variables
  - @media (min-width: 768px): increase container padding
  - @media (min-width: 1200px): scale up heading font sizes

**components.css** - Component styles:
- .site-header with nav styling
- .site-nav with flexbox for logo + nav links
- .nav-links with horizontal list, no bullets
- .site-footer with muted styling
- .article class with header and body sections
- .article-title, .article-description styles

**eleventy.config.js** - Add passthrough copy:
- Add eleventyConfig.addPassthroughCopy("src/css") before the return statement
- Keep all existing configuration intact

Use patterns from 02-RESEARCH.md. Ensure all CSS values use var() with fallbacks where appropriate.
  </action>
  <verify>
Files exist: ls src/css/layout.css src/css/components.css
Responsive queries: grep "@media" src/css/layout.css shows min-width breakpoints
Passthrough configured: grep "addPassthroughCopy.*css" eleventy.config.js
Build copies CSS: npm run build && ls _site/css/
  </verify>
  <done>
layout.css contains responsive container and article body styles.
components.css contains header, footer, and article component styles.
eleventy.config.js copies src/css/ to _site/css/ during build.
Running npm run build produces _site/css/ with all four CSS files.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. npm run build succeeds
2. _site/css/ contains variables.css, base.css, layout.css, components.css
3. grep -c "var(--" src/css/base.css shows multiple CSS custom property usages
4. grep "@media (min-width:" src/css/layout.css shows 768px and 1200px breakpoints
</verification>

<success_criteria>
- CSS design system with 20+ custom properties in variables.css
- Mobile-first responsive styles with breakpoints at 768px and 1200px
- All CSS files copied to _site/css/ during build
- No hardcoded colors, spacing, or font values in base.css, layout.css, components.css
</success_criteria>

<output>
After completion, create `.planning/phases/02-template-system-and-design/02-01-SUMMARY.md`
</output>
