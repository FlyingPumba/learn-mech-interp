---
phase: 01-foundation-deployment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - eleventy.config.js
  - src/_includes/layouts/base.njk
  - src/index.njk
  - src/topics/topics.11tydata.js
  - src/topics/test/index.md
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Running `npm run build` produces a _site/ directory with valid HTML"
    - "The test article builds to _site/topics/test/index.html"
    - "The homepage builds to _site/index.html"
  artifacts:
    - path: "package.json"
      provides: "Node.js project with Eleventy dependency"
      contains: "@11ty/eleventy"
    - path: "eleventy.config.js"
      provides: "Eleventy configuration with ESM syntax"
      contains: "export default"
    - path: "src/_includes/layouts/base.njk"
      provides: "Base HTML template for all pages"
      contains: "{{ content | safe }}"
    - path: "src/topics/topics.11tydata.js"
      provides: "Directory data file for thematic URLs"
      contains: "permalink"
    - path: "src/topics/test/index.md"
      provides: "Test article content"
      contains: "title:"
  key_links:
    - from: "src/topics/test/index.md"
      to: "src/_includes/layouts/base.njk"
      via: "topics.11tydata.js layout declaration"
      pattern: 'layout.*base\.njk'
    - from: "eleventy.config.js"
      to: "src/"
      via: "input directory configuration"
      pattern: 'input.*src'
---

<objective>
Initialize a minimal Eleventy static site with the thematic folder structure for content organization.

Purpose: Establish the build foundation that all subsequent phases will build upon. Without a working Eleventy setup, nothing else can proceed.
Output: A buildable Eleventy project with base layout and test article in the thematic `/topics/` structure.
</objective>

<execution_context>
@/Users/ivan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ivan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-deployment/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Eleventy project with base configuration</name>
  <files>
    package.json
    eleventy.config.js
    src/_includes/layouts/base.njk
    src/index.njk
    .gitignore
  </files>
  <action>
1. Initialize npm project: `npm init -y`

2. Install Eleventy: `npm install @11ty/eleventy`

3. Create eleventy.config.js (ESM syntax) with:
   - Import EleventyHtmlBasePlugin from "@11ty/eleventy"
   - Add the plugin via eleventyConfig.addPlugin()
   - Configure directories: input="src", output="_site", includes="_includes", data="_data"
   - Set templateFormats: ["md", "njk", "html"]
   - Set markdownTemplateEngine and htmlTemplateEngine to "njk"
   - Export pathPrefix: "/learn-mech-interp/" for GitHub Pages subdirectory deployment

4. Create src/_includes/layouts/base.njk with:
   - DOCTYPE html, lang="en"
   - Meta charset UTF-8, viewport for mobile
   - Title using {{ title }} variable
   - Main element with {{ content | safe }}
   - Minimal inline styles for readability (will be replaced in Phase 2)

5. Create src/index.njk as homepage with:
   - Front matter: layout "layouts/base.njk", title "Learn Mechanistic Interpretability"
   - Brief welcome text and link to test article

6. Update .gitignore to exclude:
   - node_modules/
   - _site/
   - .DS_Store

7. Add npm scripts to package.json:
   - "build": "eleventy"
   - "start": "eleventy --serve"
  </action>
  <verify>
Run `npm run build` and verify:
- Exit code 0
- _site/index.html exists and contains "Learn Mechanistic Interpretability"
- No build errors in output
  </verify>
  <done>
Eleventy builds successfully. Running `npm run build` produces _site/index.html with content from src/index.njk rendered through the base layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create thematic folder structure with test article</name>
  <files>
    src/topics/topics.11tydata.js
    src/topics/test/index.md
  </files>
  <action>
1. Create src/topics/topics.11tydata.js (ESM syntax) with:
   - Export default object containing:
     - layout: "layouts/base.njk"
     - permalink function that returns `/topics/${data.page.fileSlug}/`
   - This makes all content in /topics/ subdirectories automatically use the base layout and output to thematic URLs

2. Create src/topics/test/index.md with:
   - Front matter:
     - title: "Test Article"
     - description: "A minimal test article to verify the build and deployment pipeline"
   - Content:
     - H1 heading "Test Article"
     - Numbered list explaining what this tests (build, deployment, URL structure)
     - Final sentence: "If you can read this on the live site, the foundation phase is complete."

3. Update src/index.njk to add a link to the test article:
   - Add: `<a href="{{ '/topics/test/' | url }}">View test article</a>`
   - Using the `url` filter ensures pathPrefix is respected
  </action>
  <verify>
Run `npm run build` and verify:
- _site/topics/test/index.html exists
- The file contains "Test Article" as title
- The homepage links to /topics/test/
  </verify>
  <done>
Test article builds to the correct thematic URL path. The file _site/topics/test/index.html exists with rendered content, and the homepage links to it.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. `npm run build` succeeds with exit code 0
2. `ls _site/` shows: index.html, topics/
3. `ls _site/topics/test/` shows: index.html
4. `cat _site/index.html` contains link to /topics/test/ or /learn-mech-interp/topics/test/
5. `cat _site/topics/test/index.html` contains "Test Article" and "foundation phase is complete"
6. `npm run start` serves the site locally (optional manual check)
</verification>

<success_criteria>
- INFR-01 (partial): Site builds to static HTML (full validation after deployment)
- INFR-02: Eleventy with Nunjucks templating is configured and working
- INFR-04: Thematic folder structure exists at /topics/ with directory data file controlling URLs
- Build produces valid HTML files in _site/ directory
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-deployment/01-01-SUMMARY.md`
</output>
