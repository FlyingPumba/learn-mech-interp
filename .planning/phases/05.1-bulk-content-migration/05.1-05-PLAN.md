---
phase: 05.1-bulk-content-migration
plan: 05
type: execute
wave: 2
depends_on: ["05.1-01"]
files_modified:
  - src/topics/ioi-circuit/index.md
  - src/topics/ioi-circuit/images/ioi_circuit_diagram.png
autonomous: true

must_haves:
  truths:
    - "ioi-circuit article covers the full IOI task, all component groups (Name Movers, S-Inhibition, Duplicate Token, Backup Name Movers), circuit evaluation, and causal scrubbing"
    - "Article is a coherent single narrative combining Weeks 7 and 8 content"
    - "IOI circuit diagram placed with descriptive alt text"
  artifacts:
    - path: "src/topics/ioi-circuit/index.md"
      provides: "Weeks 7-8 content as single narrative article"
      contains: "block: \"observation-to-causation\""
    - path: "src/topics/ioi-circuit/images/ioi_circuit_diagram.png"
      provides: "Full IOI circuit diagram"
  key_links:
    - from: "src/topics/ioi-circuit/index.md"
      to: "src/topics/activation-patching/index.md"
      via: "prerequisite cross-link"
      pattern: "/topics/activation-patching/"
    - from: "src/topics/ioi-circuit/index.md"
      to: "src/topics/induction-heads/index.md"
      via: "cross-link to induction mechanism"
      pattern: "/topics/induction-heads/"
---

<objective>
Create Block 3 Part 2: the IOI Circuit case study article, combining Weeks 7-8 into a single deep dive.

Purpose: The IOI (Indirect Object Identification) circuit is the most complete circuit discovery in MI to date, and serves as the canonical example of the entire MI methodology. This article combines two weeks of content into one comprehensive case study.
Output: 1 article (potentially long, ~2,500-4,000 words) with 1 diagram
</objective>

<execution_context>
@/Users/ivan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ivan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/05.1-bulk-content-migration/05.1-RESEARCH.md

Source content:
@/Users/ivan/latex/mech-interp-course/week-07/week-07.typ
@/Users/ivan/latex/mech-interp-course/week-08/week-08.typ
@/Users/ivan/latex/mech-interp-course/globals.typ

Data files (already updated by Plan 01):
@src/_data/references.json
@src/_data/learningPath.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ioi-circuit article from Weeks 7-8</name>
  <files>
    src/topics/ioi-circuit/index.md
    src/topics/ioi-circuit/images/ioi_circuit_diagram.png
  </files>
  <action>
Create directory, copy image, and write article:
```bash
mkdir -p src/topics/ioi-circuit/images
cp /Users/ivan/latex/mech-interp-course/week-08/assets/ioi_circuit_diagram.png src/topics/ioi-circuit/images/
```

Convert week-07.typ (945 lines) and week-08.typ (1102 lines) into a single narrative article. This is the largest content conversion (2047 lines combined). The combined article covers:

**From Week 7:**
1. **The IOI Task** - "When Mary and John went to the store, John gave a drink to ___" -> Mary. Why this is a good benchmark for MI. Clean/corrupted run setup specific to IOI.

2. **Discovery Methodology** - How Wang et al. (2022) discovered the circuit. Activation patching to identify important components. Iterative refinement from coarse to fine granularity.

3. **The Circuit Components:**
   - **Name Mover Heads** - Copy the indirect object's name to the output
   - **Duplicate Token Heads** - Detect that a name has appeared before
   - **S-Inhibition Heads** - Suppress the subject (repeated) name in the Name Movers
   - **Induction-like Heads** - Contribute to identifying token repetitions

**From Week 8:**
4. **Negative Name Movers** - Heads that move the WRONG name (partial cancellation). Why they exist (capacity allocation, not errors).

5. **Backup Name Movers** - Heads that activate when primary Name Movers are ablated. Evidence of redundancy and distributed processing.

6. **Circuit Evaluation** - How to evaluate a discovered circuit: faithfulness, completeness, minimality. Knock-out experiments. The "circuit sufficiency" test.

7. **Causal Scrubbing** - Chan et al.'s rigorous method for testing circuit hypotheses. How it formalizes the "does this circuit explain the behavior?" question. Connection to the broader causal inference framework.

Front matter:
```yaml
---
title: "The IOI Circuit: A Complete Case Study"
description: "A deep dive into the Indirect Object Identification circuit -- the most complete circuit discovery in mechanistic interpretability, revealing how GPT-2 identifies indirect objects through coordinated attention heads."
prerequisites:
  - title: "Activation Patching and Causal Interventions"
    url: "/topics/activation-patching/"
  - title: "Induction Heads and In-Context Learning"
    url: "/topics/induction-heads/"
difficulty: "advanced"
block: "observation-to-causation"
category: "core-concepts"
---
```

Image placement:
```markdown
![Diagram showing the full IOI circuit with Name Mover Heads, S-Inhibition Heads, Duplicate Token Heads, and their connections through the residual stream](/topics/ioi-circuit/images/ioi_circuit_diagram.png "Figure 1: The complete IOI circuit discovered by Wang et al. (2022). Duplicate Token Heads detect repeated names, S-Inhibition Heads suppress the subject, and Name Mover Heads copy the indirect object to the output.")
```

Content guidelines:
- This is a long article (target 2,500-4,000 words). If it exceeds 4,000 words, prioritize depth on the core circuit (components, connections) and be more concise on evaluation methods.
- Merge Week 7 and 8 content into a single narrative flow -- do NOT have a "Week 7" / "Week 8" boundary visible in the article.
- Cite: wang2022ioi, conmy2023ioi, chan2022causalscrubbing (all in references.json)
- Translate all math from Typst to KaTeX
- 2 pause-and-think prompts (e.g., "Why do Negative Name Movers exist?" or "What would happen if we knocked out all S-Inhibition Heads?")
- 2-4 sidenotes
- Cross-link to activation-patching (patching methodology), induction-heads (induction-like behavior in the circuit)
- Cross-link forward to superposition (why polysemanticity makes circuit discovery harder)
- Do NOT duplicate content already covered in the activation-patching article (the worked IOI example there). Instead, reference it: "As we explored in [Activation Patching](/topics/activation-patching/), the IOI task provides..."
  </action>
  <verify>Run `npx @11ty/eleventy` and check build succeeds. Verify the article appears in sidebar under "Observation to Causation." Check the circuit diagram renders. Check math, citations, and cross-links work. Verify article length is in the 2,500-4,000 word range.</verify>
  <done>ioi-circuit article exists as a single coherent narrative covering Weeks 7-8. Circuit diagram placed with alt text. All citations resolve. Cross-links to activation-patching and induction-heads work. Article covers all major components: Name Movers, S-Inhibition, Duplicate Token, Negative/Backup Name Movers, circuit evaluation, and causal scrubbing.</done>
</task>

</tasks>

<verification>
1. `npx @11ty/eleventy` builds without errors
2. ioi-circuit appears in sidebar under "Observation to Causation" block (after activation-patching)
3. IOI circuit diagram renders with alt text and Figure 1 caption
4. No KaTeX red error boxes
5. All {% cite %} shortcodes resolve (wang2022ioi, conmy2023ioi, chan2022causalscrubbing)
6. Cross-links to activation-patching and induction-heads work
7. Prev/next navigation works (activation-patching -> ioi-circuit -> superposition)
</verification>

<success_criteria>
- ioi-circuit is a complete, readable article combining Weeks 7-8 into a coherent narrative
- All major circuit components and evaluation methods covered
- Circuit diagram placed with proper alt text and caption
- Article is between 2,500-4,000 words
- All citations and cross-links work
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-bulk-content-migration/05.1-05-SUMMARY.md`
</output>
